# Gambatter アプリ機能仕様書

## 1. アプリ概要
**アプリ名**: Gambatter  
**目的**: 日々の「頑張り」を記録し、継続的な努力を可視化してモチベーション維持をサポートする  
**開発方針**: 最小構成で完成させ、段階的に機能拡張を行う  

## 2. 主要機能

### 2.1 頑張り記録機能
- **機能**: 「頑張った」ボタンをタップして記録
- **制限**: 1日1回のみ記録可能
- **記録内容**: 日付と時刻（将来的にカテゴリ・メモ追加予定）
- **フィードバック**: 記録成功時の視覚的フィードバック

### 2.2 連続記録日数表示機能
- **機能**: 連続して記録した日数を表示
- **更新**: 記録時にリアルタイム更新
- **リセット**: 1日記録を忘れると0にリセット

### 2.3 月間カレンダー表示機能
- **機能**: 月間カレンダー形式で記録履歴を表示
- **表示内容**: 
  - 記録した日を視覚的にマーク（色付きなど）
  - 記録していない日は通常表示
- **操作**: 月の切り替え可能（前月・翌月）

## 3. 画面設計

### 3.1 メイン画面（単一画面構成）
```
┌─────────────────────────────┐
│        Gambatter            │
├─────────────────────────────┤
│   連続記録: XX日            │
├─────────────────────────────┤
│     [頑張ったボタン]        │
├─────────────────────────────┤
│      月間カレンダー          │
│  日 月 火 水 木 金 土        │
│   1  2  3  4  5  6  7      │
│   8  9 10 11 12 13 14      │
│  15 16 17 18 19 20 21      │
│  22 23 24 25 26 27 28      │
│  29 30 31                  │
│                             │
│    < 前月    今月    翌月 > │
└─────────────────────────────┘
```

## 4. データ設計

### 4.1 データベース構造（SQLite）
```sql
-- 頑張り記録テーブル
CREATE TABLE effort_records (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  recorded_date DATE NOT NULL UNIQUE,  -- YYYY-MM-DD形式
  recorded_at DATETIME NOT NULL,       -- 記録時刻
  category_id INTEGER,                 -- 将来のカテゴリ機能用（NULL許可）
  memo TEXT,                          -- 将来のメモ機能用（NULL許可）
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- 将来のカテゴリテーブル（後で追加予定）
-- CREATE TABLE categories (
--   id INTEGER PRIMARY KEY AUTOINCREMENT,
--   name TEXT NOT NULL,
--   color TEXT,
--   created_at DATETIME DEFAULT CURRENT_TIMESTAMP
-- );
```

### 4.2 クラウド移行対応
- UUIDの追加を検討
- 同期用のタイムスタンプ管理
- オフライン対応のための一時保存機能

## 5. 機能詳細

### 5.1 記録ボタンの動作
1. ボタンタップ
2. 今日の日付で既に記録があるかチェック
3. 既に記録がある場合：エラーメッセージ表示
4. 記録がない場合：データベースに保存
5. 連続記録日数を再計算・更新
6. カレンダー表示を更新
7. 成功フィードバック表示

### 5.2 連続記録日数の計算ロジック
1. 今日から過去に遡って連続記録をカウント
2. 記録が途切れた日で停止
3. 今日記録していない場合は昨日までをカウント

### 5.3 カレンダー表示ロジック
1. 月の最初と最後の日を取得
2. 該当月の記録データを取得
3. カレンダーグリッドに記録状況を反映
4. 月切り替え時は再描画

## 6. 将来の拡張予定

### 6.1 フェーズ2（中期）
- カテゴリ機能（勉強、運動、仕事など）
- メモ機能
- 統計画面（週間・月間グラフ）
- 目標設定機能

### 6.2 フェーズ3（長期）
- クラウド同期
- 複数デバイス対応
- リマインダー機能
- 達成バッジ・励ましメッセージ
- データエクスポート機能

## 7. 技術要件
- **プラットフォーム**: Flutter（iOS/Android）
- **データベース**: SQLite（将来的にクラウドDB移行）
- **状態管理**: StatefulWidget（将来的にProvider/Riverpod検討）
- **日付処理**: Dartの DateTime クラス